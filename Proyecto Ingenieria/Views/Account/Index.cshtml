@{
    Layout = null;
}

<!DOCTYPE html>
<html lang="en">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Login y Registro</title>
    <link rel="stylesheet" href="~/AccountTemplate/css/styles.css">
</head>
<body>
    <div class="container">
        <div class="form-container">
            <div class="form-wrapper">
                <!-- Formulario de Login -->
                <form class="login-form" id="loginForm">
                    <h2>Iniciar Sesión</h2>
                    <div class="input-group">
                        <label for="login-email">Correo Electrónico</label>
                        <input type="email" id="login-email" placeholder="example@correo.com" required>
                    </div>
                    <div class="input-group">
                        <label for="login-password">Contraseña</label>
                        <input type="password" id="login-password" placeholder="••••••••" required>
                    </div>
                    <button type="submit" class="btn">Ingresar</button>
                    <p class="toggle-form">¿No tienes una cuenta? <a href="#" id="show-register">Regístrate</a></p>
                </form>

                <!-- Formulario de Registro -->
                <form class="register-form" id="registerForm" style="display: none;">
                    <h2>Regístrate</h2>
                    <div class="input-group">
                        <label for="register-email">Correo Electrónico</label>
                        <input type="email" id="register-email" placeholder="example@correo.com" required>
                    </div>
                    <div class="input-group">
                        <label for="register-password">Contraseña</label>
                        <input type="password" id="register-password" placeholder="••••••••" required>
                    </div>
                    <button type="submit" class="btn">Registrar</button>
                    <p class="toggle-form">¿Ya tienes una cuenta? <a href="#" id="show-login">Iniciar Sesión</a></p>
                </form>

            </div>
        </div>
        <div class="side-panel">
            <h1>Bienvenido</h1>
            <p>Accede o crea una cuenta para disfrutar de nuestros servicios.</p>
        </div>
    </div>

    <script src="https://code.jquery.com/jquery-3.6.0.min.js"></script>
    <script>
        // Lógica para mostrar y ocultar formularios de login y registro
        $('#show-register').on('click', function () {
            $('.login-form').hide();
            $('.register-form').show();
        });

        $('#show-login').on('click', function () {
            $('.register-form').hide();
            $('.login-form').show();
        });

        $('#registerForm').on('submit', function (e) {
            e.preventDefault(); // Evitar el envío por defecto del formulario

            // Obtener los valores del formulario
            var username = $('#register-email').val();
            var password = $('#register-password').val();
            var role = 'Cliente'; // Puedes cambiar esto según sea necesario
            var createdAt = new Date().toISOString(); // Fecha y hora actual en formato ISO

            // Crear el objeto JSON
            var data = {
                "username": username,
                "password": password,
                "role": 'Cliente',
                "createdAt": createdAt
            };

            $.ajax({
                url: 'https://localhost:7277/api/User',
                type: 'POST',
                contentType: 'application/json',
                data: JSON.stringify(data),
                success: function (response) {
                    console.log('Usuario registrado con éxito:', response);
                    alert('Registro exitoso');
                },
                error: function (xhr, status, error) {
                    console.error('Error al registrar:', error);
                    console.log('Detalles del error:', xhr.responseText);  // Esto te dará más detalles sobre el error.
                    alert('Hubo un problema al registrar el usuario');
                }
            });

        });



    </script>

    <script src="~/AccountTemplate/js/script.js"></script>
</body>
</html>
